<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Validate Birth</title>
  <link rel="stylesheet" href="style/styles.css">

  <style>
    :root{
      --blue-100:#D0E1F5; --blue-200:#A8BCDA; --blue-700:#415D8A;
      --white:#FFFFFF; --text:#1e293b;
      --slate-100:#f1f5f9; --slate-200:#e2e8f0; --slate-300:#cbd5e1; --slate-700:#334155;
      --green-600:#16a34a; --green-700:#15803d; --red-600:#dc2626; --red-700:#b91c1c;
      --violet-600:#7c3aed; --violet-700:#6d28d9;
    }

    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#fff;color:var(--text);}

    /* Page header */
    .page-header { margin: 24px 16px 18px; }
    .page-header h1 { font-size: 28px; margin: 0 0 4px; color: var(--text); }
    .page-header .subtitle { margin: 0; color: var(--slate-700); }

    /* Table shell */
    .table-wrap { margin: 0 16px 24px; background: var(--white); border:1px solid var(--slate-200); border-radius: 8px; overflow: hidden; }
    .reg-table { width: 100%; border-collapse: collapse; table-layout: fixed; background: var(--white); }
    .reg-table thead th {
      text-align: left; font-weight: 600; color: var(--slate-700);
      background: var(--slate-100); border-bottom: 1px solid var(--slate-200);
      padding: 12px 14px; font-size: 14px;
    }
    .reg-table td { padding: 14px; vertical-align: middle; border-top: 1px solid var(--slate-200); border-left: 1px solid var(--slate-200); }
    .reg-table td:first-child { border-left: none; }
    .reg-table tr:last-child td { border-bottom: none; }

    /* Name cell */
    .name-cell .name { font-weight: 600; color: var(--text); }
    .name-cell .muted { color: #64748b; font-size: 13px; }

    /* Link icon */
    .requirements, .link-icon { display: inline-flex; align-items: center; }
    .link-icon {
      border: 1px solid var(--slate-300);
      background: var(--white);
      padding: 8px; border-radius: 8px; cursor: pointer; color: var(--slate-700);
    }
    .link-icon:hover { background: var(--slate-100); }

    /* Buttons */
    .btn { border: 1px solid transparent; border-radius: 10px; padding: 10px 14px; font-weight: 600; cursor: pointer; font-size: 14px; display: inline-flex; align-items: center; gap: 8px; }
    .btn .btn-icon { font-weight: 700; }
    .btn.primary { background: var(--blue-700); color: #fff; }
    .btn.primary:hover { background: #3a537c; }
    .btn.success { background: var(--green-600); color: #fff; }
    .btn.success:hover { background: var(--green-700); }
    .btn.success.outline { background: #eaf7ef; color: var(--green-700); border-color: #b7e0c3; }
    .btn.danger { background: var(--red-600); color: #fff; }
    .btn.danger.ghost { background: #fff; color: var(--red-700); border-color: #fecaca; }
    .btn.sm { padding: 6px 10px; font-size: 13px; border-radius: 8px; }

    /* Inline actions */
    .actions-inline { display: inline-flex; gap: 8px; }

    /* Stack */
    .stack-gap-6 { display: grid; gap: 6px; }

    /* Badges */
    .badge { display:inline-flex; align-items:center; padding: 4px 8px; border-radius: 999px; font-size: 12px; font-weight: 600; }
    .badge.ok { background: #e8f5ee; color: var(--green-700); border: 1px solid #b7e0c3; }
    .badge.pending { background: #f1f5ff; color: #1e40af; border: 1px solid #c7d2fe; }
    .badge.reject { background: #fff1f2; color: var(--red-700); border: 1px solid #fecdd3; }

    /* Actions column links */
    .action-links { display: grid; gap: 8px; }
    .action { display:inline-flex; align-items:center; gap: 6px; text-decoration: none; font-weight: 600; color: var(--blue-700); }
    .action .action-icon { font-size: 14px; }
    .action:hover { text-decoration: underline; }
    .action.violet { color: var(--violet-700); }

    /* Dialogs (requirements & validate registration) */
    .req-dialog {
      width: 900px; max-width: 95vw;
      margin: auto; padding: 0;
      border: 1px solid var(--slate-300);
      border-radius: 12px;
    }
    .req-dialog::backdrop { background: rgba(0,0,0,.35); }

    .req-dialog header{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 14px; background:var(--slate-100); border-bottom:1px solid var(--slate-200);
    }
    .req-dialog h3{ margin:0; font-size:16px; color:var(--text); }
    .icon.ghost { background: transparent; border: none; font-size: 16px; cursor: pointer; color: var(--slate-700); }
    .icon.ghost:hover { opacity: .8; }

    /* Table-like content inside dialogs */
    .req-table{ width:100%; border:1px solid var(--slate-200); border-radius:10px; overflow:hidden; }
    .req-thead{ display:grid; grid-template-columns:1.4fr 1fr 1.4fr; background:var(--slate-100); }
    .req-th{ padding:10px 12px; font-weight:700; color:var(--slate-700); border-right:1px solid var(--slate-200); text-align:center; }
    .req-th:last-child{ border-right:none; }
    .req-tbody{ list-style:none; margin:0; padding:0; }
    .req-tr{ display:grid; grid-template-columns:1.4fr 1fr 1.4fr; }
    .req-td{
      padding:12px; background:#fff;
      border-top:1px solid var(--slate-200); border-right:1px solid var(--slate-200);
    }
    .req-td:last-child{ border-right:none; }
    .req-title{ font-weight:600; color:var(--text); display:flex; align-items:center; }
    .req-td .actions-inline{ display:inline-flex; gap:10px; justify-content:center; width:100%; }
    .note-form{ display:grid; gap:8px; justify-items:center; }
    .note-input{ width:100%; border:1px solid var(--slate-300); border-radius:8px; padding:8px 10px; font:inherit; resize:vertical; }
    .req-td:has(.note-form[hidden]){ background:#fff; }

    /* Big modal for the registration form */
    .form-dialog {
      width: 95vw; max-width: 1200px;
      height: 92vh; max-height: 92vh;
      margin: auto; padding: 0;
      border: 1px solid var(--slate-300);
      border-radius: 12px;
    }
    .form-dialog::backdrop { background: rgba(0,0,0,.45); }
    .form-dialog__bar{
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px; padding: 10px 12px; background: var(--slate-100); border-bottom: 1px solid var(--slate-200);
    }
    .form-dialog__bar h3{ margin:0; font-size:16px; color:var(--text); }
    .form-dialog__actions{ display:flex; gap:8px; }
    .form-dialog__host{ width: 100%; height: calc(92vh - 50px); background:#fff; }
    .form-dialog__host iframe{ width: 100%; height: 100%; border: 0; background: #fff; }
  
    /* 2-column app layout so content sits beside the sidebar */
.app{
  display: grid;
  grid-template-columns: 260px 1fr;
  min-height: 100dvh;
}

/* Content column padding so the header & table aren‚Äôt glued to the edges */
.content{
  padding: 16px 16px 24px;
}

/* (optional) keep sidebar width consistent */
.sidebar{ width: 260px; }



/* optional: scale down on small screens so it doesn‚Äôt overflow */
@media (max-width:1024px){
  .page-header .page-title{ font-size:56px; }
  .page-header .subtitle{ font-size:32px; }
}
@media (max-width:640px){
  .page-header .page-title{ font-size:40px; }
  .page-header .subtitle{ font-size:22px; }
}

/* huge header + subheader */
.page-header .page-title{
  font-size: 58px;
  line-height: 1.05;
  font-weight: 800;
  margin: 0;
  color: var(--text);
}
.page-header .subtitle{
  font-size: 28px;
  line-height: 1.1;
  font-weight: 600;
  margin: 6px 0 0;
  color: var(--slate-700);
}

  .typewriter{
  display: inline-block;
  white-space: nowrap;
  overflow: hidden;
  border-right: 2px solid transparent;  /* caret */
  padding-right: .1em;

  --tw-chars: 0;
  --tw-duration: 3s;
}

.typewriter.animating{
  border-right-color: #415D8A;   /* caret color */
  animation: typing var(--tw-duration) steps(var(--tw-chars), end) forwards;
}

@keyframes typing{
  from{ width: 0 }
  to  { width: calc(var(--tw-chars) * 1ch) }
}

  </style>
</head>

<body>

<div class="app">
       <aside class="sidebar" data-collapsed="false">
  <div class="brand">
    <div class="logo">
      <img src="image/LCRlogo.png" alt="LCR Logo">
    </div>
    <div class="name">
      Shields<span class="accent">.Civil</span>
    </div>
    <p class="tagline">Civil Registry Management System</p>
  </div>

  <nav class="nav" role="navigation">
    <div class="nav__section">Main</div>
    <a href="staffPanel.html" class="nav__link " aria-current="page" title="Home">
      <span class="nav__icon" aria-hidden="true">üè†</span>
      <span class="nav__label">Home</span>
    </a>
    <a href="validateDashboard.html" class="nav__link " title="Dashboard">
      <span class="nav__icon" aria-hidden="true">üìä</span>
      <span class="nav__label">Dashboard</span>
    </a>

    <div class="nav__section">Validations</div>
    <a href="validateBirth.html" class="nav__link" title="Validate Birth">
      <span class="nav__icon" aria-hidden="true">üë∂</span>
      <span class="nav__label">Validate Birth</span>
    </a>
    <a href="validateDeath.html" class="nav__link" title="Validate Death">
      <span class="nav__icon" aria-hidden="true">üïäÔ∏è</span>
      <span class="nav__label">Validate Death</span>
    </a>
    <a href="validateMarriage.html" class="nav__link is-active" title="Validate Marriage">
      <span class="nav__icon" aria-hidden="true">üíç</span>
      <span class="nav__label">Validate Marriage</span>
    </a>
  </nav>
</aside>


  <main class="content">
    <section class="page-header">
         <h1 class="page-title">
  <span class="typewriter">Death Registration Validation</span>
</h1>
<p class="subtitle">Review and validate registration applications</p>

      <br>
      <br>
      <br>
      <br>

         
  <div class="table-wrap">
    <table class="reg-table">
      <colgroup>
        <col style="width: 18%">
        <col style="width: 22%">
        <col style="width: 12%">
        <col style="width: 20%">
        <col style="width: 13%">
        <col style="width: 15%">
      </colgroup>
      <thead>
        <tr>
          <th>Name</th>
          <th>Validate Requirements</th>
          <th>Status</th>
          <th>Validate Registration</th>
          <th>Final Status</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <!-- NAME -->
          <td>
            <div class="name-cell">
              <div class="name">Jouselo Nakila</div>
              <div class="muted">john.smith@email.com</div>
              <div class="muted">Engineering</div>
            </div>
          </td>

          <!-- VALIDATE REQUIREMENTS -->
          <td>
            <div class="requirements">
              <button class="link-icon" data-open="req-1" aria-label="View requirements">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M10.59 13.41a2 2 0 0 0 2.82 0l3.59-3.59a2 2 0 1 0-2.82-2.82l-1.18 1.18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M13.41 10.59a2 2 0 0 0-2.82 0L7 14.18a2 2 0 1 0 2.82 2.82l1.18-1.18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>

              <!-- Requirements dialog -->
              <dialog id="req-1" class="req-dialog">
                <header>
                  <h3>Uploaded Requirements</h3>
                  <button class="icon ghost" data-close aria-label="Close">‚úï</button>
                </header>

                <div class="req-table">
                  <div class="req-thead">
                    <div class="req-th">Requirement</div>
                    <div class="req-th">Actions</div>
                    <div class="req-th">Notes</div>
                  </div>

                  <ul class="req-tbody">
                    <li class="req-tr">
                      <span class="req-td req-title">Birth Certificate (PDF)</span>
                      <div class="req-td">
                        <div class="actions-inline">
                          <button class="btn sm success" data-approve>Approve</button>
                          <button class="btn sm danger ghost" data-revise>Revise (with note)</button>
                        </div>
                      </div>
                      <div class="req-td">
                        <form class="note-form" hidden>
                          <textarea class="note-input" rows="3" placeholder="Add a short note explaining what to revise..."></textarea>
                          <button class="btn sm primary" data-send-revision>Send for Revision</button>
                        </form>
                      </div>
                    </li>

                    <li class="req-tr">
                      <span class="req-td req-title">Parent ID (Front)</span>
                      <div class="req-td">
                        <div class="actions-inline">
                          <button class="btn sm success" data-approve>Approve</button>
                          <button class="btn sm danger ghost" data-revise>Revise (with note)</button>
                        </div>
                      </div>
                      <div class="req-td">
                        <form class="note-form" hidden>
                          <textarea class="note-input" rows="3" placeholder="Add a short note explaining what to revise..."></textarea>
                          <button class="btn sm primary" data-send-revision>Send for Revision</button>
                        </form>
                      </div>
                    </li>

                    <li class="req-tr">
                      <span class="req-td req-title">Parent ID (Back)</span>
                      <div class="req-td">
                        <div class="actions-inline">
                          <button class="btn sm success" data-approve>Approve</button>
                          <button class="btn sm danger ghost" data-revise>Revise (with note)</button>
                        </div>
                      </div>
                      <div class="req-td">
                        <form class="note-form" hidden>
                          <textarea class="note-input" rows="3" placeholder="Add a short note explaining what to revise..."></textarea>
                          <button class="btn sm primary" data-send-revision>Send for Revision</button>
                        </form>
                      </div>
                    </li>

                    <li class="req-tr">
                      <span class="req-td req-title">Hospital Record</span>
                      <div class="req-td">
                        <div class="actions-inline">
                          <button class="btn sm success" data-approve>Approve</button>
                          <button class="btn sm danger ghost" data-revise>Revise (with note)</button>
                        </div>
                      </div>
                      <div class="req-td">
                        <form class="note-form" hidden>
                          <textarea class="note-input" rows="3" placeholder="Add a short note explaining what to revise..."></textarea>
                          <button class="btn sm primary" data-send-revision>Send for Revision</button>
                        </form>
                      </div>
                    </li>
                  </ul>
                </div>
              </dialog>
            </div>
          </td>

          <!-- STATUS -->
          <td>
            <div class="stack-gap-6" data-status>
              <span class="badge pending">Pending</span>
            </div>
          </td>

          <!-- VALIDATE REGISTRATION (same UI as requirements) -->
          <td>
            <div class="validate-registration">
              <button class="link-icon" data-open="reg-1" aria-label="View registration details">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M10.59 13.41a2 2 0 0 0 2.82 0l3.59-3.59a2 2 0 1 0-2.82-2.82l-1.18 1.18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M13.41 10.59a2 2 0 0 0-2.82 0L7 14.18a2 2 0 1 0 2.82 2.82l1.18-1.18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>

            <dialog id="reg-1" class="req-dialog">
              <header>
                <h3>Validate Registration</h3>
                <button class="icon ghost" data-close aria-label="Close">‚úï</button>
              </header>

              <div class="req-table">
                <div class="req-thead">
                  <div class="req-th">Field</div>
                  <div class="req-th">Actions</div>
                  <div class="req-th">Notes</div>
                </div>

                <ul class="req-tbody">
                  <li class="req-tr">
                    <span class="req-td req-title">Full Name: John Smith</span>
                    <div class="req-td">
                      <div class="actions-inline">
                        <button class="btn sm success" data-approve>Approve</button>
                        <button class="btn sm danger ghost" data-revise>Revise (with note)</button>
                      </div>
                    </div>
                    <div class="req-td">
                      <form class="note-form" hidden>
                        <textarea class="note-input" rows="3" placeholder="Add note for revision..."></textarea>
                        <button class="btn sm primary" data-send-revision>Send for Revision</button>
                      </form>
                    </div>
                  </li>

                  <li class="req-tr">
                    <span class="req-td req-title">Date of Birth: 12/03/2023</span>
                    <div class="req-td">
                      <div class="actions-inline">
                        <button class="btn sm success" data-approve>Approve</button>
                        <button class="btn sm danger ghost" data-revise>Revise (with note)</button>
                      </div>
                    </div>
                    <div class="req-td">
                      <form class="note-form" hidden>
                        <textarea class="note-input" rows="3" placeholder="Add note for revision..."></textarea>
                        <button class="btn sm primary" data-send-revision>Send for Revision</button>
                      </form>
                    </div>
                  </li>

                  <li class="req-tr">
                    <span class="req-td req-title">Place of Birth: General Hospital</span>
                    <div class="req-td">
                      <div class="actions-inline">
                        <button class="btn sm success" data-approve>Approve</button>
                        <button class="btn sm danger ghost" data-revise>Revise (with note)</button>
                      </div>
                    </div>
                    <div class="req-td">
                      <form class="note-form" hidden>
                        <textarea class="note-input" rows="3" placeholder="Add note for revision..."></textarea>
                        <button class="btn sm primary" data-send-revision>Send for Revision</button>
                      </form>
                    </div>
                  </li>
                </ul>
              </div>
            </dialog>
          </td>

          <!-- FINAL STATUS -->
          <td>
            <div class="stack-gap-6" data-status-final>
              <span class="badge pending">Pending</span>
            </div>
          </td>

          <!-- VIEW FORM (opens big modal with iframe) -->
          <td>
            <div class="action-links">
              <a href="#" class="action violet" data-open-form="form-1">
                <span class="action-icon">üìù</span> View Registration Form
              </a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  </main>
</div>
  <!-- Registration Form Modal -->
  <dialog id="form-1" class="form-dialog">
    <header class="form-dialog__bar">
      <h3>Registration Form ‚Äì Certificate of Live Birth</h3>
      <div class="form-dialog__actions">
        <button class="btn sm primary" data-print>Print</button>
        <button class="btn sm danger ghost" data-close aria-label="Close">Close ‚úï</button>
      </div>
    </header>
    <div class="form-dialog__host">
      <iframe id="regFormFrame-1"
              title="Certificate of Live Birth"
              sandbox="allow-same-origin allow-forms allow-scripts allow-popups allow-modals"></iframe>
    </div>
  </dialog>

  <!-- ===== The full birth form HTML is stored in this template and injected into the iframe ===== -->
  <template id="birth-form-template">
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Certificate of Live Birth ‚Äì Municipal Form No. 102 (Rev. Aug 2016)</title>
<style>
  /* ===== PAGE & PRINT SETUP ===== */
  @page { size: 8.5in 13in; margin: 0.5in; }
  html, body { height: 100%; }
  body {
    margin: 0; font-family: Arial, Helvetica, sans-serif;
    -webkit-print-color-adjust: exact; print-color-adjust: exact;
    background: #f7f7f7;
  }
  .sheet {
    width: calc(8.5in - 1in);
    min-height: calc(13in - 1in);
    height: auto;
    margin: 0.5in auto;
    background: #fff;
    box-shadow: 0 0 0.05in rgba(0,0,0,0.2);
    position: relative;
    padding: 0.25in 0.3in 0.2in 0.3in;
  }
  .grid { border: 2px solid #2aa14a; min-height: 100%; height: auto; position: relative; }
  * { box-sizing: border-box; }
  .ink { color: #1e7f3a; }
  .bar-title { padding: 6px 10px; border-bottom: 2px solid #2aa14a; }
  .bar-title h1 { margin: 2px 0 0; font-size: 20px; letter-spacing: 0.5px; text-align: center; }
  .bar-title .sub { font-size: 11px; text-align: center; margin-top: 1px; }

  .meta-row {
    display: grid; grid-template-columns: 1fr 180px; gap: 2px;
    border-top: 2px solid #2aa14a; border-bottom: 2px solid #2aa14a;
  }
  .meta-row > div { padding: 6px 8px; }
  .meta-row label { color: #2aa14a; font-size: 10px; display: block; margin-bottom: 3px; }
  .meta-row .box { border-left: 2px solid #2aa14a; }

  .section { display: grid; grid-template-columns: 22px 1fr; border-bottom: 2px solid #2aa14a; min-height: 2.2in; }
  .section:last-of-type { border-bottom: none; }
  .vertical-word {
    border-right: 2px solid #2aa14a;
    display: flex; align-items: flex-start; justify-content: center;
    padding-top: 6px; writing-mode: vertical-rl; transform: rotate(180deg);
    font-weight: bold; letter-spacing: 2px; color: #2aa14a; font-size: 12px;
  }
  .fields { padding: 0; display: grid; grid-auto-rows: minmax(28px, auto); }

  .row { display: grid; grid-template-columns: 1.2fr 0.9fr 1.1fr 1.1fr; }
  .row.small  { grid-template-columns: 1fr 1fr 1fr 1fr; }
  .row.single { grid-template-columns: 1fr; }
  .row.cols-2 { grid-template-columns: 1.2fr 2fr; }
  .row.cols-3 { grid-template-columns: 1fr 1fr 1fr; }

  .cell { border-bottom: 2px solid #2aa14a; border-right: 2px solid #2aa14a; padding: 6px 6px 4px; }
  .row .cell:first-child { border-left: none; }
  .lbl { color: #2aa14a; font-size: 10px; display: block; margin-bottom: 4px; }
  .lbl b { font-weight: 700; }

  .line-input { position: relative; border-bottom: 1px solid #2aa14a; min-height: 18px; }
  .line-input input, .line-input select, .line-input textarea {
    width: 100%; border: 0; outline: none; background: transparent; font: inherit; padding: 2px 0 2px;
  }
  .line-input textarea { resize: vertical; min-height: 22px; }

  .date { padding-right: 24px; position: relative; }
  .date-icon {
    position: absolute; right: 0; top: -2px; width: 18px; height: 18px; border: 0;
    background: none; cursor: pointer; opacity: .75;
  }
  .date-icon:hover { opacity: 1; }

  .attendant { display: grid; grid-template-columns: repeat(auto-fit,minmax(140px,1fr)); gap: 8px 12px; }
  .muted { color: #1d8743; font-size: 10px; }
  .subblock { border-top: 2px solid #2aa14a; margin-top: 16px; padding-top: 12px; }

  .actions { position: sticky; bottom: 0; background: rgba(255,255,255,.95); border-top: 2px solid #2aa14a; padding: 10px; display: flex; gap: 8px; justify-content: flex-end; }
  .btn { border: 2px solid #2aa14a; background: #2aa14a; color: #fff; padding: 8px 14px; border-radius: 6px; font-weight: 700; cursor: pointer; }
  .btn[disabled] { opacity: .45; cursor: not-allowed; }

  @media print {
    body { background: white; }
    .sheet { box-shadow: none; margin: 0; height: auto; min-height: auto; }
    .actions { display: none; }
  }

  .form-head{ display:flex; justify-content:space-between; align-items:flex-start; padding: 6px 10px 4px; }
  .form-head .left{ font-size:10px; line-height:1.1; }
  .form-head .left b{ display:block; margin-bottom:1px; }
  .form-head .right{ font-size:10px; font-style:italic; margin-top:2px; text-align:right; }

  .formal-date{ font-size: 11px; color: #1d8743; margin-top: 2px; }

  .date input[type="date"]{ color: transparent; caret-color: transparent; }
  .date input[type="date"]::-webkit-calendar-picker-indicator{ opacity: 0; pointer-events: none; }
  .date input[type="date"]::-ms-clear,
  .date input[type="date"]::-webkit-clear-button,
  .date input[type="date"]::-webkit-inner-spin-button,
  .date input[type="date"]::-webkit-datetime-edit{ display: none; }

  .formal-date{ position: absolute; left: 0; top: 2px; font-size: 11px; color: #1d8743; pointer-events: none; }
  .line-input.date{ padding-right: 24px; }

  @media print {
    .date input[type="date"], .date .date-icon { display: none !important; }
    .formal-date { position: static; font-size: 12px; }
  }
</style>
</head>
<body>

<form id="birthForm">
  <div class="sheet">
    <div class="grid">
      <div class="form-head">
        <div class="left ink">
          <div><b>Municipal Form No. 102</b></div>
          <small>(Revised August 2016)</small>
        </div>
        <div class="right ink"><em>To be accomplished in quadruplicate using black ink</em></div>
      </div>

      <div class="bar-title ink">
        <div class="sub">Republic of the Philippines<br>OFFICE OF THE CIVIL REGISTRAR GENERAL</div>
        <h1>CERTIFICATE OF LIVE BIRTH</h1>
      </div>

      <div class="meta-row">
        <div>
          <label class="ink">Province</label>
          <div class="line-input"><input name="meta_province" required></div>
          <label class="ink" style="margin-top:8px">City/Municipality</label>
          <div class="line-input"><input name="meta_city" required></div>
        </div>
        <div class="box">
          <label class="ink">Registry No.</label>
          <div class="line-input"><input name="meta_registry_no" required></div>
        </div>
      </div>

      <!-- ===== CHILD SECTION ===== -->
      <section class="section">
        <div class="vertical-word">C H I L D</div>
        <div class="fields">
          <div class="row">
            <div class="cell">
              <label class="lbl"><b>1. NAME</b> <span class="muted">(First)</span></label>
              <div class="line-input"><input name="child_first" required></div>
            </div>
            <div class="cell">
              <label class="lbl muted">(Middle)</label>
              <div class="line-input"><input name="child_middle" required></div>
            </div>
            <div class="cell" style="grid-column: span 2;">
              <label class="lbl muted">(Last)</label>
              <div class="line-input"><input name="child_last" required></div>
            </div>
          </div>

          <div class="row">
            <div class="cell">
              <label class="lbl"><b>2. SEX</b> <span class="muted">(Male / Female)</span></label>
              <div class="line-input">
                <select name="child_sex" required>
                  <option value="" hidden>Select</option>
                  <option>Male</option>
                  <option>Female</option>
                </select>
              </div>
            </div>
            <div class="cell" style="grid-column: span 3;">
              <label class="lbl"><b>3. DATE OF BIRTH</b></label>
              <div class="line-input date">
                <input type="date" name="child_dob" required>
                <button class="date-icon" type="button" aria-label="Pick date">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="#2aa14a" aria-hidden="true">
                    <path d="M7 2h2v2h6V2h2v2h3a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3V2zm13 8H4v10h16V10zM4 8h16V6H4v2z"></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="cell" style="grid-column: span 2;">
              <label class="lbl"><b>4. PLACE OF BIRTH</b> <span class="muted">(Name of Hospital/Clinic/Institution/ House No., St., Barangay)</span></label>
              <div class="line-input"><input name="birth_place_addr" required></div>
            </div>
            <div class="cell">
              <label class="lbl muted">(City/Municipality)</label>
              <div class="line-input"><input name="birth_place_city" required></div>
            </div>
            <div class="cell">
              <label class="lbl muted">(Province)</label>
              <div class="line-input"><input name="birth_place_province" required></div>
            </div>
          </div>

          <div class="row small">
            <div class="cell">
              <label class="lbl"><b>5a. TYPE OF BIRTH</b> <span class="muted">(Single, Twin, Triplet, etc.)</span></label>
              <div class="line-input"><input name="type_of_birth" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>5b. IF MULTIPLE BIRTH, CHILD WAS</b></label>
              <div class="line-input"><input name="multiple_birth_order_text" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>5c. BIRTH ORDER</b></label>
              <div class="line-input"><input type="number" min="1" name="birth_order" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>6. WEIGHT AT BIRTH</b></label>
              <div class="line-input"><input type="number" min="1" name="birth_weight_grams" required></div>
              <div class="muted" style="text-align:right; margin-top:2px;">grams</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== MOTHER SECTION ===== -->
      <section class="section">
        <div class="vertical-word">M O T H E R</div>
        <div class="fields">
          <div class="row">
            <div class="cell">
              <label class="lbl"><b>7. MAIDEN NAME</b> <span class="muted">(First)</span></label>
              <div class="line-input"><input name="mother_first" required></div>
            </div>
            <div class="cell">
              <label class="lbl muted">(Middle)</label>
              <div class="line-input"><input name="mother_middle" required></div>
            </div>
            <div class="cell" style="grid-column: span 2;">
              <label class="lbl muted">(Last)</label>
              <div class="line-input"><input name="mother_last" required></div>
            </div>
          </div>

          <div class="row cols-3">
            <div class="cell">
              <label class="lbl"><b>8. CITIZENSHIP</b></label>
              <div class="line-input"><input name="mother_citizenship" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>9. RELIGION/RELIGIOUS SECT</b></label>
              <div class="line-input"><input name="mother_religion" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>10a. Total number of children born alive</b></label>
              <div class="line-input"><input type="number" min="0" name="mother_children_total" required></div>
            </div>
          </div>

          <div class="row cols-3">
            <div class="cell">
              <label class="lbl"><b>10b. No. of children still living including this birth</b></label>
              <div class="line-input"><input type="number" min="0" name="mother_children_living" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>10c. No. of children born alive but are now dead</b></label>
              <div class="line-input"><input type="number" min="0" name="mother_children_dead" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>11. OCCUPATION</b></label>
              <div class="line-input"><input name="mother_occupation" required></div>
            </div>
          </div>

          <div class="row cols-3">
            <div class="cell">
              <label class="lbl"><b>12. AGE at the time of this birth</b> <span class="muted">(completed years)</span></label>
              <div class="line-input"><input type="number" min="10" name="mother_age" required></div>
            </div>
            <div class="cell" style="grid-column: span 2;">
              <label class="lbl"><b>13. RESIDENCE</b> <span class="muted">(House No., St., Barangay) | (City/Municipality) | (Province) | (Country)</span></label>
              <div class="line-input"><input name="mother_residence" required></div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== FATHER SECTION ===== -->
      <section class="section" style="min-height: 3.2in;">
        <div class="vertical-word">F A T H E R</div>
        <div class="fields">
          <div class="row">
            <div class="cell">
              <label class="lbl"><b>14. NAME</b> <span class="muted">(First)</span></label>
              <div class="line-input"><input name="father_first" required></div>
            </div>
            <div class="cell">
              <label class="lbl muted">(Middle)</label>
              <div class="line-input"><input name="father_middle" required></div>
            </div>
            <div class="cell" style="grid-column: span 2;">
              <label class="lbl muted">(Last)</label>
              <div class="line-input"><input name="father_last" required></div>
            </div>
          </div>

          <div class="row cols-3">
            <div class="cell">
              <label class="lbl"><b>15. CITIZENSHIP</b></label>
              <div class="line-input"><input name="father_citizenship" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>16. RELIGION/RELIGIOUS SECT</b></label>
              <div class="line-input"><input name="father_religion" required></div>
            </div>
            <div class="cell">
              <label class="lbl"><b>17. OCCUPATION</b></label>
              <div class="line-input"><input name="father_occupation" required></div>
            </div>
          </div>

          <div class="row cols-3">
            <div class="cell">
              <label class="lbl"><b>18. AGE at the time of this birth</b> <span class="muted">(completed years)</span></label>
              <div class="line-input"><input type="number" min="10" name="father_age" required></div>
            </div>
            <div class="cell" style="grid-column: span 2;">
              <label class="lbl"><b>19. RESIDENCE</b> <span class="muted">(House No., St., Barangay) | (City/Municipality) | (Province) | (Country)</span></label>
              <div class="line-input"><input name="father_residence" required></div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== MARRIAGE OF PARENTS ===== -->
      <div class="row single">
        <div class="cell">
          <label class="lbl"><b>MARRIAGE OF PARENTS</b> <span class="muted">(If not married, accomplish Affidavit of Acknowledgement/Admission of Paternity at the back.)</span></label>
          <div class="row small" style="border-top: 2px solid #2aa14a;">
            <div class="cell" style="grid-column: span 2;">
              <label class="lbl"><b>20a. DATE</b></label>
              <div class="line-input date">
                <input type="date" name="parents_marriage_date" required>
                <button class="date-icon" type="button" aria-label="Pick date">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="#2aa14a" aria-hidden="true">
                    <path d="M7 2h2v2h6V2h2v2h3a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3V2zm13 8H4v10h16V10zM4 8h16V6H4v2z"></path>
                  </svg>
                </button>
              </div>
            </div>
            <div class="cell" style="grid-column: span 2;">
              <label class="lbl"><b>20b. PLACE</b> <span class="muted">(City / Municipality) | (Province) | (Country)</span></label>
              <div class="line-input"><input name="parents_marriage_place" required></div>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== 21 ATTENDANT & CERTIFICATION ===== -->
      <div class="row single">
        <div class="cell">
          <label class="lbl"><b>21a. ATTENDANT</b></label>
          <div class="attendant">
            <label><input type="radio" name="attendant" value="Physician" required> Physician</label>
            <label><input type="radio" name="attendant" value="Nurse"> Nurse</label>
            <label><input type="radio" name="attendant" value="Midwife"> Midwife</label>
            <label><input type="radio" name="attendant" value="Hilot"> Hilot (TBA)</label>
            <span>
              <label><input type="radio" name="attendant" value="Others" id="attendant_others"> Others</label>
              <div class="line-input" style="margin-top:4px;"><input id="attendant_other_text" name="attendant_other_text" placeholder="Specify if Others"></div>
            </span>
          </div>

          <label class="lbl" style="margin-top:10px;"><b>21b. CERTIFICATION OF ATTENDANT AT BIRTH</b></label>
          <div class="row cols-3" style="border-top: 2px solid #2aa14a; padding-top: 8px;">
            <div class="cell" style="grid-column: span 3;">
              <div class="row small" style="border-top: 0;">
                <div class="cell">
                  <div class="line-input"><input name="att_sig" required></div>
                  <div class="muted">Signature</div>
                </div>
                <div class="cell">
                  <div class="line-input"><input name="att_name" required></div>
                  <div class="muted">Name in Print</div>
                </div>
                <div class="cell">
                  <div class="line-input"><input name="att_address" required></div>
                  <div class="muted">Address</div>
                </div>
                <div class="cell">
                  <div class="line-input"><input name="att_title" required></div>
                  <div class="muted">Title or Position</div>
                </div>
                <div class="cell" style="grid-column: span 2;">
                  <div class="line-input date">
                    <input type="date" name="att_date" required>
                    <button class="date-icon" type="button" aria-label="Pick date">
                      <svg viewBox="0 0 24 24" width="18" height="18" fill="#2aa14a" aria-hidden="true">
                        <path d="M7 2h2v2h6V2h2v2h3a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3V2zm13 8H4v10h16V10zM4 8h16V6H4v2z"></path>
                      </svg>
                    </button>
                  </div>
                  <div class="muted">Date</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== 22‚Äì25 blocks ===== -->
      <div class="row cols-2">
        <div class="cell">
          <label class="lbl"><b>22. CERTIFICATION OF INFORMANT</b></label>
          <div class="muted" style="margin-bottom:8px;">
            I hereby certify that all information supplied are true and correct to my own knowledge and belief.
          </div>

          <div class="line-input"><input name="inf_sig" required></div>
          <div class="muted">Signature</div>

          <div class="line-input" style="margin-top:10px;"><input name="inf_name" required></div>
          <div class="muted">Name in Print</div>

          <div class="line-input" style="margin-top:10px;"><input name="inf_relation" required></div>
          <div class="muted">Relationship to the Child</div>

          <div class="line-input" style="margin-top:10px;"><input name="inf_address" required></div>
          <div class="muted">Address</div>

          <div class="line-input date" style="margin-top:10px;">
            <input type="date" name="inf_date" required>
            <button class="date-icon" type="button" aria-label="Pick date">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="#2aa14a" aria-hidden="true">
                <path d="M7 2h2v2h6V2h2v2h3a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3V2zm13 8H4v10h16V10zM4 8h16V6H4v2z"></path>
              </svg>
            </button>
          </div>
          <div class="muted">Date</div>

          <div class="subblock">
            <label class="lbl"><b>24. RECEIVED BY</b></label>
            <div class="line-input"><input name="rec_sig" required></div>
            <div class="muted">Signature</div>

            <div class="line-input" style="margin-top:10px;"><input name="rec_name" required></div>
            <div class="muted">Name in Print</div>

            <div class="line-input" style="margin-top:10px;"><input name="rec_title" required></div>
            <div class="muted">Title or Position</div>

            <div class="line-input date" style="margin-top:10px;">
              <input type="date" name="rec_date" required>
              <button class="date-icon" type="button" aria-label="Pick date">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="#2aa14a" aria-hidden="true">
                  <path d="M7 2h2v2h6V2h2v2h3a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3V2zm13 8H4v10h16V10zM4 8h16V6H4v2z"></path>
                </svg>
              </button>
            </div>
            <div class="muted">Date</div>
          </div>
        </div>

        <div class="cell">
          <label class="lbl"><b>23. PREPARED BY</b></label>
          <br>
          <div class="line-input"><input name="prep_sig" required></div>
          <div class="muted">Signature</div>

          <div class="line-input date" style="margin-top:10px;">
            <input type="date" name="prep_date" required>
            <button class="date-icon" type="button" aria-label="Pick date">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="#2aa14a" aria-hidden="true">
                <path d="M7 2h2v2h6V2h2v2h3a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3V2zm13 8H4v10h16V10zM4 8h16V6H4v2z"></path>
              </svg>
            </button>
          </div>
          <div class="muted">Date</div>

          <div class="line-input" style="margin-top:10px;"><input name="prep_name" required></div>
          <div class="muted">Name in Print</div>

          <div class="line-input" style="margin-top:10px;"><input name="prep_title" required></div>
          <div class="muted">Title or Position</div>
          <br><br>
          <div class="subblock">
            <label class="lbl"><b>25. REGISTERED AT THE OFFICE OF THE CIVIL REGISTRAR</b></label>
            <div class="line-input"><input name="reg_sig" required></div>
            <div class="muted">Signature</div>

            <div class="line-input" style="margin-top:10px;"><input name="reg_name" required></div>
            <div class="muted">Name in Print</div>

            <div class="line-input" style="margin-top:10px;"><input name="reg_title" required></div>
            <div class="muted">Title or Position</div>

            <div class="line-input date" style="margin-top:10px;">
              <input type="date" name="reg_date" required>
              <button class="date-icon" type="button" aria-label="Pick date">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="#2aa14a" aria-hidden="true">
                  <path d="M7 2h2v2h6V2h2v2h3a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3V2zm13 8H4v10h16V10zM4 8h16V6H4v2z"></path>
                </svg>
              </button>
            </div>
            <div class="muted">Date</div>
          </div>
        </div>
      </div>

      <div class="row single">
        <div class="cell">
          <label class="lbl"><b>REMARKS/ANNOTATIONS</b> <span class="muted">(For LCRO/OCRG Use Only)</span></label>
          <div style="height: 60px; border: 1px dashed #2aa14a; margin-top:6px;"></div>
        </div>
      </div>

      <div class="row single">
        <div class="cell">
          <label class="lbl"><b>TO BE FILLED-UP AT THE OFFICE OF THE CIVIL REGISTRAR</b></label>
          <div class="digit-boxes" aria-hidden="true">
            <span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span><span></span>
            <span></span><span></span>
          </div>
          <div class="muted" style="margin-top:4px;">8&nbsp;&nbsp;9&nbsp;&nbsp;11&nbsp;&nbsp;13&nbsp;&nbsp;15&nbsp;&nbsp;16&nbsp;&nbsp;17&nbsp;&nbsp;19</div>
        </div>
      </div>

      <div class="actions">
        <button class="btn" type="reset">Reset</button>
        <button id="submitBtn" class="btn" type="submit" disabled>Submit</button>
      </div>
    </div>
  </div>
</form>

<script>
  // Enable Ctrl/Cmd+P to print nicely
  window.addEventListener('keydown', (e) => {
    if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'p') {
      setTimeout(() => window.print(), 50);
    }
  });

  // Form validation & UX
  const form = document.getElementById('birthForm');
  const submitBtn = document.getElementById('submitBtn');

  function updateSubmitState() {
    const othersRadio = document.getElementById('attendant_others');
    const othersText = document.getElementById('attendant_other_text');
    if (othersRadio) { othersText.required = othersRadio.checked; }
    submitBtn.disabled = !form.checkValidity();
  }

  form.addEventListener('input', updateSubmitState);
  form.addEventListener('change', updateSubmitState);

  // Make calendar icons open the picker
  document.querySelectorAll('.date-icon').forEach(btn => {
    btn.addEventListener('click', () => {
      const input = btn.previousElementSibling;
      if (input && input.showPicker) input.showPicker(); else input.focus();
    });
  });

  form.addEventListener('submit', (e) => {
    if (!form.checkValidity()) {
      e.preventDefault(); form.reportValidity(); return;
    }
    e.preventDefault();
    alert('‚úÖ Form submitted! (Hook up your own submit handler here.)');
  });

  function formatDateLong(iso){
    if(!iso) return '';
    const [y,m,d] = iso.split('-').map(Number);
    if(!y || !m || !d) return '';
    const month = new Date(y, m - 1, d).toLocaleString('en-US', { month: 'long' });
    return `${month} ${d}, ${y}`;
  }
  function attachFormalDatePreviews(){
    document.querySelectorAll('input[type="date"]').forEach(input => {
      let preview = input.parentElement.querySelector('.formal-date');
      if(!preview){
        preview = document.createElement('div');
        preview.className = 'formal-date';
        input.parentElement.appendChild(preview);
      }
      preview.textContent = formatDateLong(input.value);
      input.addEventListener('input', () => preview.textContent = formatDateLong(input.value));
      input.addEventListener('change', () => preview.textContent = formatDateLong(input.value));
    });
  }
  updateSubmitState();
  attachFormalDatePreviews();
</script>
</body>
</html>
  </template>

  <script>
    /* ===========================
       Dialog open/close handlers
       =========================== */
    document.addEventListener('click', (e) => {
      const openBtn = e.target.closest('[data-open]');
      if (openBtn) {
        const id = openBtn.getAttribute('data-open');
        const dlg = document.getElementById(id);
        if (dlg && typeof dlg.showModal === 'function') dlg.showModal();
      }
      if (e.target.matches('[data-close]')) {
        const dlg = e.target.closest('dialog');
        if (dlg) dlg.close();
      }
    });

    /* =======================================
       Approve / Revise (with note) per item
       ======================================= */
    document.addEventListener('click', (e) => {
      // Approve
      const approveBtn = e.target.closest('[data-approve]');
      if (approveBtn) {
        approveBtn.textContent = 'Approved';
        approveBtn.disabled = true;
        const actionsRow = approveBtn.closest('.actions-inline');
        const reviseBtn = actionsRow?.querySelector('[data-revise]');
        if (reviseBtn) reviseBtn.disabled = true;
        return;
      }

      // Show note form
      const reviseBtn = e.target.closest('[data-revise]');
      if (reviseBtn) {
        const li = reviseBtn.closest('li, .req-tr');
        const form = li.querySelector('.note-form');
        if (form) { form.hidden = false; reviseBtn.disabled = true; }
        return;
      }

      // Send revision
      const sendBtn = e.target.closest('[data-send-revision]');
      if (sendBtn) {
        e.preventDefault();
        const form = sendBtn.closest('.note-form');
        const textarea = form.querySelector('.note-input');
        const note = textarea.value.trim();
        if (!note) { textarea.focus(); textarea.placeholder = 'Please add a short note before sending‚Ä¶'; return; }
        sendBtn.textContent = 'Revision Sent';
        sendBtn.disabled = true;
        const li = sendBtn.closest('li, .req-tr');
        li.querySelectorAll('[data-approve],[data-revise]').forEach(b => b.disabled = true);
        return;
      }
    });

    /* =======================================
       Auto-update row Status from dialog state
       ======================================= */
    function makeBadge(type, text) {
      const span = document.createElement('span');
      span.className = 'badge';
      if (type === 'ok') span.classList.add('ok');
      if (type === 'pending') span.classList.add('pending');
      if (type === 'reject') span.classList.add('reject');
      span.textContent = text;
      return span;
    }
    function renderStatus(container, type, text) {
      if (!container) return;
      container.innerHTML = '';
      container.appendChild(makeBadge(type, text));
    }
    function computeDialogStatus(dlg) {
      const items = dlg.querySelectorAll('.req-tr, li');
      let approved = 0, revised = 0, total = 0;
      items.forEach(item => {
        total++;
        const approveBtn = item.querySelector('[data-approve]');
        const reviseBtn  = item.querySelector('[data-revise]');
        const sendBtn    = item.querySelector('[data-send-revision]');
        const noteForm   = item.querySelector('.note-form');
        const isApproved = !!(approveBtn?.disabled && /approved/i.test(approveBtn.textContent));
        const sentRevision = !!(sendBtn?.disabled && /revision sent/i.test(sendBtn.textContent));
        const requestedRevision = !!(reviseBtn?.disabled && noteForm && !noteForm.hidden);
        if (isApproved) approved++; else if (sentRevision || requestedRevision) revised++;
      });
      return { total, approved, revised };
    }
    function findRowForDialog(dlg) {
      const opener = document.querySelector(`[data-open="${dlg.id}"]`);
      return opener ? opener.closest('tr') : null;
    }
    function updateStatusFromDialog(dlg) {
      const row = findRowForDialog(dlg);
      if (!row) return;
      const { total, approved, revised } = computeDialogStatus(dlg);
      let type = 'pending', text = 'Pending';
      if (total > 0 && approved === total) { type = 'ok'; text = 'Approved'; }
      else if (revised > 0) { type = 'reject'; text = 'Revision Required'; }
      const statusDiv = row.querySelector('[data-status]');
      renderStatus(statusDiv, type, text);
      // Optional: mirror to Final Status
      const finalDiv = row.querySelector('[data-status-final]');
      if (finalDiv) renderStatus(finalDiv, type, text);
    }
    document.addEventListener('click', (e) => {
      if (
        e.target.closest('[data-approve]') ||
        e.target.closest('[data-revise]') ||
        e.target.closest('[data-send-revision]')
      ) {
        const dlg = e.target.closest('dialog');
        if (dlg) setTimeout(() => updateStatusFromDialog(dlg), 50);
      }
    });
    document.addEventListener('close', (e) => {
      if (e.target instanceof HTMLDialogElement) updateStatusFromDialog(e.target);
    }, true);

    /* =======================================
       View Registration Form (iframe loader)
       ======================================= */
    function getTemplateHTML(tpl) {
      let html = (tpl.innerHTML || "").trim();
      if (!html && tpl.content) {
        html = new XMLSerializer().serializeToString(tpl.content.cloneNode(true));
      }
      return html;
    }
    function injectIntoIframe(frame, html) {
      frame.srcdoc = html;
      const onLoad = () => {
        try {
          const doc = frame.contentDocument || frame.contentWindow?.document;
          const isBlank = !doc || !doc.body || !doc.body.childElementCount;
          if (isBlank) { doc.open(); doc.write(html); doc.close(); }
        } catch (e) {
          console.warn('Iframe fallback write failed:', e);
        } finally {
          frame.removeEventListener('load', onLoad);
        }
      };
      frame.addEventListener('load', onLoad);
    }
    document.addEventListener('click', (e) => {
      const trigger = e.target.closest('[data-open-form]');
      if (trigger) {
        e.preventDefault();
        const dlg = document.getElementById(trigger.getAttribute('data-open-form'));
        const frame = dlg?.querySelector('iframe');
        const tpl  = document.getElementById('birth-form-template');
        if (frame && tpl) {
          const html = getTemplateHTML(tpl);
          injectIntoIframe(frame, html);
        }
        dlg?.showModal();
      }
      if (e.target.matches('[data-close]')) {
        e.target.closest('dialog')?.close();
      }
      if (e.target.matches('[data-print]')) {
        const frame = e.target.closest('dialog')?.querySelector('iframe');
        frame?.contentWindow?.focus();
        frame?.contentWindow?.print();
      }
    });


      document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.typewriter').forEach(el => {
      const text = el.textContent.trim();
      el.style.setProperty('--tw-chars', text.length);
      el.style.setProperty('--tw-duration', Math.max(1.8, text.length * 0.065) + 's');
      el.classList.add('animating');

      // Once typing ends, remove the caret completely
      el.addEventListener('animationend', (e) => {
        if (e.animationName === 'typing') {
          el.style.borderRight = 'none';
        }
      });
    });
  });
  </script>
 <footer class="footer">
      <p>¬© 2025 Shields.Civil Registry Management | Ensuring accuracy and integrity of records</p>
    </footer>
</body>
</html>
